# 视频购物网站接口文档

### 一、登录模块接口文档

#### 1. 接口概述

本接口文档描述了登录模块的主要功能，包括用户登录和账号注册。在使用网站的其他功能之前，用户必须先进行登录。同时，用户也可以通过注册接口创建新的账号。

#### 2. 基础信息

- **API版本**：v1
- **Base URL**：https://api.example.com/v1
- **认证方式**：在登录后，使用JWT（JSON Web Token）进行后续请求的认证

#### 3. 接口列表 *

##### 3.1 用户注册

**接口路径**：`/auth/register`

**请求方法**：POST

**请求参数**：

- 请求体（JSON格式）：

  ```json
  {
    "username": "string",  // 用户名，必填
    "password": "string"  // 密码，必填，使用强密码策略
  }
  ```

**响应参数**：

```json
{
    "code": 1,
    "message": "success",
    "data": "用户注册成功！"
}
```

或（如果注册失败）：

```json
{
    "code": 1,
    "message": "注册失败"
}
```

**响应状态码**：

- 201：用户注册成功
- 400：请求格式错误或用户名已存在
- 500：服务器错误

##### 3.2 用户登录

**接口路径**：`/auth/login`

**请求方法**：POST

**请求参数**：

- 请求体（JSON格式）：

  ```json
  {
    "username": "string",  // 用户名，必填
    "password": "string"   // 密码，必填
  }
  ```

**响应参数**：

```json
{
  "code": "1",
  "message": "success",
  "data": "tokenstring"  // JWT令牌，用于后续请求的认证
}
```

或（如果登录失败）：

```json
{
  "code": "0",
  "message": "用户名或密码错误"
}
```

**响应状态码**：

- 200：用户登录成功
- 400：请求格式错误或用户名/密码无效
- 500：服务器错误

#### 4. 认证与授权

- 在进行除注册和登录外的其他请求时，需要在HTTP请求头中包含`Authorization`字段，其值为`Bearer {token}`，其中`{token}`是登录接口返回的JWT令牌。

#### 5. 错误处理

- 所有失败的请求都会返回一个包含错误信息的JSON对象，如上述响应参数中的错误示例所示。

#### 6. 安全注意事项

- 密码在存储时应使用强哈希算法进行加密。
- JWT令牌应设置合理的过期时间，并在必要时进行刷新。
- 使用HTTPS协议保护数据传输安全。

### 二、视频模块接口文档

#### 1. 接口概述

本接口文档描述了视频模块的主要功能，包括首页向用户随机推荐视频、点击视频图片跳转到视频主页播放视频以及视频发布者可以在视频下方添加商品的功能。

#### 2. 基础信息

- **API版本**：v1
- **Base URL**：https://api.example.com/v1
- **认证方式**：JWT（JSON Web Token）

#### 3. 接口列表 *

##### 3.1 获取首页推荐视频

**接口路径**：`/videos/recommended`

**请求方法**：GET

**请求参数**：

- 无

**响应参数**：

```json
{
  "code": "1",
  "message": "success",
  "data": {
      "video_id": "string",
      "video_title": "string",
	  "video_info": "string",
      "video_file_path": "string"
    }
}
```

**响应状态码**：

- 200：成功
- 401：未授权
- 500：服务器错误

##### 3.2 跳转到视频主页播放视频

**接口路径**：`/videos/{id}`

**请求方法**：GET

**请求参数**：

- `video_id`：视频的唯一标识符（路径参数）

**响应参数**：

```json
{
  "code": "1",
  "message": "success",
  "data": {
      "video_id": "string",
	  "video_info": "string",
      "video_file_path": "string",
      "product_id": "string"
  }
}
```

**响应状态码**：

- 200：成功
- 404：视频未找到
- 500：服务器错误

##### 3.3 视频发布者添加商品

**接口路径**：`/videos/{video_id}/products`

**请求方法**：POST

**请求参数**：

- `video_id`：视频的唯一标识符（路径参数）
- 请求体（JSON格式）：

```json
{
  "id": "string",  // 商品唯一标识符
  "productName": "string",
  "productInfo": "string",
  "price": "number",
  "productQuantity": "string" //可选
}
```

**响应参数**：

```json
{
  "code": "1",
  "message": "success",
  "data": "产品添加成功"
}
```

**响应状态码**：

- 200：成功
- 400：请求格式错误
- 401：未授权
- 404：视频未找到
- 500：服务器错误

#### 4. 认证与授权

所有请求都需要携带有效的JWT令牌进行认证。令牌可以通过登录接口获取。

#### 5. 错误处理

所有失败的请求都会返回一个包含错误信息的JSON对象，例如：

```json
{
  "code": "0",
  "message": "操作失败"
}
```

#### 6. 安全注意事项

- 密码在存储时应使用强哈希算法进行加密。
- JWT令牌应设置合理的过期时间，并在必要时进行刷新。
- 使用HTTPS协议保护数据传输安全。

### 三、商品与订单模块接口文档

#### 1. 接口概述

本接口文档描述了商品与订单模块的主要功能，包括从视频下方链接跳转到商品购买页、查看商品信息以及查看用户订单。用户可以通过视频下方的链接跳转到商品购买页，查看详细的商品信息，并进行购买。购买后，用户可以在订单管理页面查看订单信息。

#### 2. 基础信息

- **API版本**：v1
- **Base URL**：https://api.example.com/v1
- **认证方式**：JWT（JSON Web Token）

#### 3. 接口列表 *

##### 3.1 跳转到商品购买页

**接口路径**：`/videos/{video_id}/products/{product_id}`
（或设计为从视频详情页获取商品列表后，通过商品ID进行跳转）

**请求方法**：GET（实际可能是通过点击链接直接跳转，此处仅为接口描述）

**请求参数**：

- `video_id`：视频的唯一标识符（路径参数，可能用于追踪来源）
- `product_id`：商品的唯一标识符（路径参数）

**响应**：

- 实际上是一个前端页面的跳转，不直接返回JSON数据。但可以通过URL参数或前端路由传递商品ID，再由前端请求商品详情接口。

##### 3.2 获取商品详情

**接口路径**：`/products/{product_id}`

**请求方法**：GET

**请求参数**：

- `product_id`：商品的唯一标识符（路径参数）

**响应参数**：

```json
{
  "code": "1",
  "message": "success",
  "data": {
    "product_id": "string", // 商品id
    "product_name": "string", // 商品名
    "product_info": "string", // 商品描述
    "price": "number", // 商品价格
  }
}
```

**响应状态码**：

- 200：成功
- 404：商品未找到
- 500：服务器错误

##### 3.3 创建订单

**接口路径**：`/orders`

**请求方法**：POST

**请求参数**：

- `user_id`：用户唯一标识符（路径参数）
- 请求体（JSON格式）

```json
{
    "order_id": "string",
    "order_status": "pending", // 初始订单状态
    "order_amount": "number", // 花费金额
	"order_quantity": "string" // 购买商品信息(购买数量)
}
```

**响应参数**：

```json
{
  "code": "1",
  "message": "success",
  "data": "订单创建成功"
}
```

**响应状态码**：

- 201：订单创建成功
- 400：请求格式错误或缺少必要参数
- 401：未授权
- 500：服务器错误

##### 3.4 查看用户订单

**接口路径**：`/orders/{user_id}`

**请求方法**：GET

**请求参数**：

- `user_id`：用户的唯一标识符（路径参数，但通常通过JWT令牌验证用户身份后获取）

**响应参数**：

```json
{
  "code": "1",
  "message": "success",
  "data": {
    "order_id": "string",
    "order_status": "pending", // 初始订单状态
    "order_amount": "number", // 花费金额
	"order_quantity": "string" // 购买商品信息(购买数量)
  }
}
```

**响应状态码**：

- 200：成功
- 401：未授权
- 404：用户未找到或用户无订单
- 500：服务器错误

#### 4. 认证与授权

- 所有涉及用户数据的请求（如创建订单和查看用户订单）都需要通过JWT令牌进行认证。

#### 5. 错误处理

- 所有失败的请求都会返回一个包含错误信息的JSON对象。

#### 6. 安全注意事项

- 确保JWT令牌的安全存储和传输。
- 对敏感信息（如支付方式和地址）进行加密处理。
- 定期检查并更新依赖库以防范安全漏洞。

### 四、用户信息管理模块接口文档

#### 1. 接口概述

本接口文档描述了信息管理模块的主要功能，包括发布视频信息、管理视频关联的商品、以及管理用户自己的商品列表。发布者可以通过接口发布视频，并从自己的商品列表中选择商品进行关联。同时，发布者还可以修改已发布的视频信息，并管理自己的商品列表。用户则可以对自己的商品列表进行增删改查操作。

#### 2. 基础信息

- **API版本**：v1
- **Base URL**：https://api.example.com/v1
- **认证方式**：JWT（JSON Web Token），所有涉及用户数据的请求都需要通过JWT令牌进行认证。

#### 3. 接口列表 *

##### 3.1 视频信息

**接口路径**：`/users/{user_id}/videos`

**请求方法**：POST

**请求参数**：

- `user_id`：用户唯一标识符（路径参数）

- 请求体（JSON格式）：

```json
{
  "video_title": "string", //视频标题
  "video_info": "string",  // 视频内容概括
  "video_file_path": "file", // 视频文件（可能通过multipart/form-data上传）
  "product_id": ["string", "string", ...]  // 可选，关联的商品ID列表
}
```

**响应参数**：

```json
{
  "code": "1",
  "message": "success"
}
```

**响应状态码**：

- 201：视频发布成功
- 400：请求格式错误或缺少必要参数
- 401：未授权
- 500：服务器错误

##### 3.2 获取发布者商品列表

**接口路径**：`/users/{user_id}/products`

**请求方法**：GET

**请求参数**：

- `user_id`：发布者唯一标识符（路径参数）

**响应参数**：

```json
{
  "code": "1",
  "message": "success",
  "data": [
    {
      "product_id": "string",
      "product_name": "string",
      "product_quantity": "string",
      "product_info": "string",
      "price": "number",
    }
  ]
}
```

**响应状态码**：

- 200：成功
- 401：未授权
- 404：用户未找到或用户无商品
- 500：服务器错误

##### 3.3 修改视频信息

**接口路径**：`/users/videos/{video_id}`

**请求方法**：PUT

**请求参数**：

- `video_id`：视频唯一标识符（路径参数）
- 请求体（JSON格式）：

```json
{
  "video_title": "string",
  "video_info": "string",      
  "video_file_path": "string",
  "product_id": ["string", "string", ...]  // 关联的商品ID列表（替换原有列表）
}
```

**响应参数**：

```json
{
  "code": "1",
  "message": "success"
}
```

**响应状态码**：

- 200：视频信息修改成功
- 400：请求格式错误或缺少必要参数
- 401：未授权
- 404：视频未找到
- 500：服务器错误

##### 3.4 添加商品信息

**接口路径**：`/users/{user_id}/products`

**请求方法**：POST

**请求参数**：

- `user_id`：用户唯一标识符（路径参数）
- 请求体（JSON格式）：

```json
{
  "id": "string",  // 商品唯一标识符
  "productName": "string",
  "productInfo": "string",
  "price": "number",
  "productQuantity": "string" //可选
}
```

**响应参数**：

```json
{
  "code": "1",
  "message": "success"
}
```

**响应状态码**：

- 201：商品添加成功
- 400：请求格式错误或缺少必要参数
- 401：未授权
- 500：服务器错误

##### 3.5 删除商品信息

**接口路径**：`/users/products/{product_id}`

**请求方法**：DELETE

**请求参数**：

- `product_id`：商品唯一标识符（路径参数）

**响应参数**：

```json
{
  "code": "1",
  "message": "success"
}
```

**响应状态码**：

- 200：商品删除成功
- 401：未授权
- 404：商品未找到或用户无权限
- 500：服务器错误

##### 3.6 更新商品信息

**接口路径**：`/users/{user_id}/products/{product_id}`

**请求方法**：PUT

**请求参数**：

- `user_id`：用户唯一标识符（路径参数）
- `product_id`：商品唯一标识符（路径参数）
- 请求体（JSON格式）：

```json
{
  "product_id": "string",  
  "product_name": "string",        
  "product_info": "string", 
  "price": "number",     
}
```

**响应参数**：

```json
{
  "code": "1",
  "message": "success"
}
```

**响应状态码**：

- 200：商品信息更新成功
- 400：请求格式错误或缺少必要参数
- 401：未授权
- 404：商品未找到或用户无权限
- 500：服务器错误

#### 4. 安全注意事项

- 确保JWT令牌的安全存储和传输。
- 对敏感信息（如用户ID和商品信息）进行适当的保护。
- 定期检查并更新依赖库以防范安全漏洞。
